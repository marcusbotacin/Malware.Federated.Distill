# Malware.Federated.Distill

Additional material for the "Cross-Regional Malware Detection via Model Distilling and Federated Learning" paper.

## Reproducing the paper

It is as simple as following two steps:

### 1. Get some data

You have two options:

* 1.1. Reuse Existing Data: We were authorized to release significant part of the dataset. Extracted feature sets are available in the *datasets* directory.

* 1.2. Extract your own data: using the *feature_extractor.py* script.

### 2. Train and use the classifiers:

* 2.1 You can run *single_classifiers.py* to run the training and testing code with different datasets.

* 2.2 All classifiers are instantiations of the NeedForSpeed model, that is described in the paper:

```
@inproceedings{10.1145/3433667.3433669,
author = {Ceschin, Fabricio and Botacin, Marcus and L\"{u}ders, Gabriel and Gomes, Heitor Murilo and Oliveira, Luiz and Gregio, Andre},
title = {No Need to Teach New Tricks to Old Malware: Winning an Evasion Challenge with XOR-based Adversarial Samples},
year = {2021},
isbn = {9781450389747},
publisher = {Association for Computing Machinery},
address = {New York, NY, USA},
url = {https://doi.org/10.1145/3433667.3433669},
doi = {10.1145/3433667.3433669},
booktitle = {Reversing and Offensive-Oriented Trends Symposium},
pages = {13â€“22},
numpages = {10},
keywords = {adversarial malware, machine learning, malware detection},
location = {Vienna, Austria},
series = {ROOTS'20}
}
```

* 2.3. You can use the model based on the RandomForest (RF) from scikitlearn; AdaptiveRandomForest (ARF) from scikit-multiflow; or the ARF from MOA.

* 2.4. In the initial implementation, we implemented a wrapper for some funcitons of the MOA framework (e.g., RF classifier). You can still use this version by cloning the MOA repository here and building the Docker with java and python. Use the *run* script to automatically run.

* 2.5. Recently, we improved on this idea of integrating the frameworks and launched a completely integrated framework: [CapyMOA](https://capymoa.org/). We suggest migrating to this new framework.
